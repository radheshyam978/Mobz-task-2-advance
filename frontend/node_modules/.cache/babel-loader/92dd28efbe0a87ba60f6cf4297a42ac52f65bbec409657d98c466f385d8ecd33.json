{"ast":null,"code":"import _objectSpread from\"C:/Users/vaish/Downloads/Email_Mobile_OTP_Redis-main/Mobz-task-advance-2/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useState}from'react';import{Link,useNavigate}from'react-router-dom';import api from'./Axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Login(){const[form,setForm]=useState({email:'',password:''});const[alert,setAlert]=useState(null);const[loading,setLoading]=useState(false);const navigate=useNavigate();const handleChange=e=>setForm(_objectSpread(_objectSpread({},form),{},{[e.target.name]:e.target.value.trimStart()}));const handleSubmit=async e=>{e.preventDefault();setAlert(null);setLoading(true);try{const{data}=await api.post('/login',form);if(data!==null&&data!==void 0&&data.success&&data!==null&&data!==void 0&&data.user){const auth={email:data.user.email,firstName:data.user.firstName,lastName:data.user.lastName};sessionStorage.setItem('authUser',JSON.stringify(auth));navigate('/live-users');}else{setAlert({type:'danger',msg:(data===null||data===void 0?void 0:data.message)||'Login failed'});}}catch(err){var _err$response,_err$response$data,_err$response2,_err$response2$data;const msg=(err===null||err===void 0?void 0:(_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||(err===null||err===void 0?void 0:(_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.error)||(err===null||err===void 0?void 0:err.message)||'Error logging in';setAlert({type:'danger',msg});}finally{setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"bg-dark text-light min-vh-100 d-flex align-items-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"mb-3 text-center\",children:\"Login\"}),/*#__PURE__*/_jsx(\"div\",{id:\"alert\",className:\"mb-3\",children:alert&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-\".concat(alert.type),role:\"alert\",children:alert.msg})}),/*#__PURE__*/_jsxs(\"form\",{className:\"card p-4 shadow-lg bg-secondary text-light mx-auto\",style:{maxWidth:'500px'},onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{name:\"email\",type:\"email\",className:\"form-control form-control-sm\",required:true,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{name:\"password\",type:\"password\",className:\"form-control form-control-sm\",required:true,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsx(\"button\",{id:\"loginBtn\",className:\"btn btn-primary\",disabled:loading,children:loading?'Logging in…':'Login'}),/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"btn btn-link text-light\",children:\"Don\\u2019t have an account? Register\"})]})]})]})});}","map":{"version":3,"names":["useState","Link","useNavigate","api","jsx","_jsx","jsxs","_jsxs","Login","form","setForm","email","password","alert","setAlert","loading","setLoading","navigate","handleChange","e","_objectSpread","target","name","value","trimStart","handleSubmit","preventDefault","data","post","success","user","auth","firstName","lastName","sessionStorage","setItem","JSON","stringify","type","msg","message","err","_err$response","_err$response$data","_err$response2","_err$response2$data","response","error","className","children","id","concat","role","style","maxWidth","onSubmit","required","onChange","disabled","to"],"sources":["C:/Users/vaish/Downloads/Email_Mobile_OTP_Redis-main/Mobz-task-advance-2/frontend/src/Components/Login.jsx"],"sourcesContent":["import { useState } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport api from './Axios';\n\nexport default function Login() {\n  const [form, setForm] = useState({ email: '', password: '' });\n  const [alert, setAlert] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const navigate = useNavigate();\n\n  const handleChange = (e) =>\n    setForm({ ...form, [e.target.name]: e.target.value.trimStart() });\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setAlert(null);\n    setLoading(true);\n    try {\n      const { data } = await api.post('/login', form);\n      if (data?.success && data?.user) {\n        const auth = {\n          email: data.user.email,\n          firstName: data.user.firstName,\n          lastName: data.user.lastName,\n        };\n        sessionStorage.setItem('authUser', JSON.stringify(auth));\n        navigate('/live-users');\n      } else {\n        setAlert({ type: 'danger', msg: data?.message || 'Login failed' });\n      }\n    } catch (err) {\n      const msg =\n        err?.response?.data?.message ||\n        err?.response?.data?.error ||\n        err?.message ||\n        'Error logging in';\n      setAlert({ type: 'danger', msg });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"bg-dark text-light min-vh-100 d-flex align-items-center\">\n      <div className=\"container\">\n        <h3 className=\"mb-3 text-center\">Login</h3>\n        <div id=\"alert\" className=\"mb-3\">\n          {alert && (\n            <div className={`alert alert-${alert.type}`} role=\"alert\">\n              {alert.msg}\n            </div>\n          )}\n        </div>\n\n        <form\n          className=\"card p-4 shadow-lg bg-secondary text-light mx-auto\"\n          style={{ maxWidth: '500px' }}\n          onSubmit={handleSubmit}\n        >\n          <div className=\"mb-3\">\n            <label className=\"form-label\">Email</label>\n            <input\n              name=\"email\"\n              type=\"email\"\n              className=\"form-control form-control-sm\"\n              required\n              onChange={handleChange}\n            />\n          </div>\n\n          <div className=\"mb-3\">\n            <label className=\"form-label\">Password</label>\n            <input\n              name=\"password\"\n              type=\"password\"\n              className=\"form-control form-control-sm\"\n              required\n              onChange={handleChange}\n            />\n          </div>\n\n          <div className=\"mt-3 d-flex justify-content-between align-items-center\">\n            <button\n              id=\"loginBtn\"\n              className=\"btn btn-primary\"\n              disabled={loading}\n            >\n              {loading ? 'Logging in…' : 'Login'}\n            </button>\n            <Link to=\"/\" className=\"btn btn-link text-light\">\n              Don’t have an account? Register\n            </Link>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}